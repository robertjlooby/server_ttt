// Generated by CoffeeScript 1.6.2
(function() {
  describe("replaceBoard", function() {
    it("finds the board", function() {
      var spy;
      spy = spyOn($.fn, "find");
      TicTacToe.replaceBoard("hello board");
      return expect(spy).toHaveBeenCalledWith("div#board");
    });
    return it("should replace the contents of #board with the given string", function() {
      var spy;
      spy = spyOn($.fn, "html");
      TicTacToe.replaceBoard("hello board");
      return expect(spy).toHaveBeenCalledWith("hello board");
    });
  });

  describe("makeMove", function() {
    it("should call ajax", function() {
      spyOn($, "ajax");
      return expect($.ajax).toHaveBeenCalled;
    });
    it("should call ajax with the board state and marker", function() {
      spyOn($, "ajax");
      TicTacToe.makeMove("X", "_________");
      expect($.ajax.mostRecentCall.args[0].data.marker).toBe("X");
      return expect($.ajax.mostRecentCall.args[0].data.board_state).toBe("_________");
    });
    it("should get move asynchronously", function() {
      spyOn($, "ajax");
      TicTacToe.makeMove("X", "_________");
      return expect($.ajax.mostRecentCall.args[0].async).toBe(true);
    });
    it("should send a POST request to /game", function() {
      spyOn($, "ajax");
      TicTacToe.makeMove("X", "_________");
      expect($.ajax.mostRecentCall.args[0].type).toBe("POST");
      return expect($.ajax.mostRecentCall.args[0].url).toBe("/game");
    });
    return it("should call replace board on success with response", function() {
      spyOn(TicTacToe, "replaceBoard");
      spyOn($, "ajax").andCallFake(function(params) {
        return params.success("hey");
      });
      TicTacToe.makeMove("X", "_________");
      return expect(TicTacToe.replaceBoard.mostRecentCall.args[0]).toBe("hey");
    });
  });

  describe("initializeGame", function() {
    it("should send an asynchronous POST request to /", function() {
      var spy;
      spyOn($, "ajax");
      spy = spyOn($.fn, "find");
      TicTacToe.initializeGame("X", "0");
      expect($.ajax.mostRecentCall.args[0].async).toBe(true);
      expect($.ajax.mostRecentCall.args[0].type).toBe("POST");
      expect($.ajax.mostRecentCall.args[0].url).toBe("/");
      expect(spy.calls[0].args[0]).toBe("input[name='marker']:checked");
      return expect(spy.calls[1].args[0]).toBe("input[name='move']:checked");
    });
    return it("should call replace board on success with response", function() {
      spyOn(TicTacToe, "replaceBoard");
      spyOn($, "ajax").andCallFake(function(params) {
        return params.success("hey");
      });
      TicTacToe.initializeGame("X", "0");
      return expect(TicTacToe.replaceBoard.mostRecentCall.args[0]).toBe("hey");
    });
  });

}).call(this);
